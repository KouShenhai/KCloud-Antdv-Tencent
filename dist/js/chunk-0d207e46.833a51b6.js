(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d207e46"],{"32be":function(t,e,r){},"33e6":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"account-settings-info-view"},[r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{md:24,lg:16}},[r("a-form-model",{ref:"form",attrs:{layout:"vertical",rules:t.rules,model:t.user}},[r("a-form-model-item",{attrs:{label:"手机",prop:"mobile"}},[r("a-input",{attrs:{placeholder:"请填写手机号"},model:{value:t.user.mobile,callback:function(e){t.$set(t.user,"mobile",e)},expression:"user.mobile"}})],1),r("a-form-model-item",{attrs:{label:"电子邮箱",prop:"email"}},[r("a-input",{attrs:{placeholder:"请填写电子邮箱"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1),r("a-form-model-item",[r("a-button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submit}},[t._v("保存")])],1)],1)],1),r("a-col",{staticStyle:{"padding-left":"100px"},style:{minHeight:"180px"},attrs:{md:24,lg:8}},[r("a-upload",{attrs:{name:"file","max-count":1,"before-upload":t.beforeUpload,showUploadList:!1},on:{change:t.uploadImg}},[r("div",{staticClass:"ant-upload-preview"},[r("a-icon",{staticClass:"upload-icon",attrs:{type:"cloud-upload-o"}}),r("div",{staticClass:"mask"},[r("a-icon",{attrs:{type:"plus"}})],1),r("img",{attrs:{src:t.user.imgUrl}})],1)])],1)],1)],1)},a=[],i=r("5530"),u=(r("d3b7"),r("8930")),s=r("5880"),o={name:"BaseSettings",components:{},data:function(){return{submitLoading:!1,user:{id:"",email:"",mobile:"",imgUrl:""},preview:{},rules:{email:[{required:!0,message:"电子邮箱不能为空",trigger:"blur"},{type:"email",message:"请正确填写邮箱地址",trigger:["blur","change"]}],mobile:[{required:!0,message:"手机号不能为空",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请正确填写手机号",trigger:"blur"}]}}},computed:Object(i["a"])({},Object(s["mapGetters"])(["nickname"])),mounted:function(){this.getUser()},methods:{uploadImg:function(t){var e=this,r=new FormData;r.append("file",t.file),Object(u["j"])(r).then((function(t){e.user.imgUrl=t.data.url}))},beforeUpload:function(){return!1},getUser:function(){var t=this;Object(u["e"])().then((function(e){t.user.email=e.data.email,t.user.id=e.data.userId,t.user.mobile=e.data.mobile,t.user.imgUrl=e.data.imgUrl}))},submit:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.submitLoading=!0,Object(u["h"])(t.user).then((function(e){t.$notification.success({message:"提示",description:"修改成功"})})).finally((function(){t.submitLoading=!1})))}))}}},d=o,l=(r("dfcf"),r("2877")),c=Object(l["a"])(d,n,a,!1,null,"12a7c74e",null);e["default"]=c.exports},8930:function(t,e,r){"use strict";r.d(e,"f",(function(){return i})),r.d(e,"d",(function(){return u})),r.d(e,"a",(function(){return s})),r.d(e,"i",(function(){return o})),r.d(e,"c",(function(){return d})),r.d(e,"g",(function(){return l})),r.d(e,"b",(function(){return c})),r.d(e,"e",(function(){return m})),r.d(e,"h",(function(){return p})),r.d(e,"j",(function(){return f})),r.d(e,"k",(function(){return b}));var n=r("b775"),a=r("1893");function i(t){return Object(n["b"])({url:"/admin/sys/user/api/query",method:"post",data:t})}function u(t){return Object(n["b"])({url:"/admin/sys/user/api/detail?id="+Object(a["d"])(t),method:"get"})}function s(t){return Object(n["b"])({url:"/admin/sys/user/api/insert",method:"post",data:t})}function o(t){return Object(n["b"])({url:"/admin/sys/user/api/update",method:"put",data:t})}function d(t){return Object(n["b"])({url:"/admin/sys/user/api/delete?id="+t,method:"delete"})}function l(t){return Object(n["b"])({url:"/admin/sys/user/api/password",method:"put",data:t})}function c(t){return Object(n["b"])({url:"/admin/sys/user/api/update",method:"put",data:t})}function m(){return Object(n["b"])({url:"/auth/sys/auth/api/userInfo",method:"get"})}function p(t){return Object(n["b"])({url:"/admin/sys/user/api/updateInfo",method:"put",data:t})}function f(t){return Object(n["b"])({url:"/admin/oss/api/upload",method:"post",data:t})}function b(){return Object(n["b"])({url:"/admin/sys/user/api/option/list",method:"get"})}},dfcf:function(t,e,r){"use strict";r("32be")}}]);