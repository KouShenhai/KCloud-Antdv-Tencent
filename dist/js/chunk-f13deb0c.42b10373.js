(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f13deb0c","chunk-67d8d0ef"],{ca94:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return n}));var s=a("b775");function r(e){return Object(s["b"])({url:"/admin/workflow/process/api/resource/query",method:"post",data:e})}function n(e){return Object(s["b"])({url:"/admin/workflow/process/api/resource/audit",method:"post",data:e})}},d5b9:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-header-wrapper",[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["workflow:process:resource:query"],expression:"['workflow:process:resource:query']"}],attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"流程名称"}},[a("a-input",{attrs:{placeholder:"请输入","allow-clear":""},model:{value:e.queryParam.processName,callback:function(t){e.$set(e.queryParam,"processName",t)},expression:"queryParam.processName"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{type:"primary"},on:{click:e.handleQuery}},[a("a-icon",{attrs:{type:"search"}}),e._v("查询")],1),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.resetQuery}},[a("a-icon",{attrs:{type:"redo"}}),e._v("重置")],1)],1)])],1)],1)],1),a("create-form",{ref:"createForm",on:{ok:e.getList}}),a("a-table",{attrs:{loading:e.loading,size:e.tableSize,rowKey:"taskId",columns:e.columns,"data-source":e.list,pagination:!1,bordered:e.tableBordered},scopedSlots:e._u([{key:"operation",fn:function(t,s){return a("span",{},[a("a",{on:{click:function(t){return e.$refs.createForm.handleAudit(s)}}},[a("a-icon",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["workflow:process:resource:audit"],expression:"['workflow:process:resource:audit']"}],attrs:{type:"audit"}}),e._v(" 审批 ")],1)])}}])}),a("a-pagination",{staticClass:"ant-table-pagination",attrs:{"show-size-changer":"","show-quick-jumper":"",current:e.queryParam.pageNum,total:e.total,"page-size":e.queryParam.pageSize,showTotal:function(e){return"共 "+e+" 条"}},on:{showSizeChange:e.onShowSizeChange,change:e.changeSize}})],1)],1)},r=[],n=a("ca94"),i=a("435a"),o=a("d5df"),c={name:"Process",components:{CreateForm:o["default"]},mixins:[i["a"]],data:function(){return{list:[],selectedRowKeys:[],selectedRows:[],single:!0,multiple:!0,ids:[],loading:!1,total:0,queryParam:{pageNum:1,pageSize:10,processName:""},columns:[{title:"任务编号",dataIndex:"taskId",align:"center",ellipsis:!0},{title:"流程名称",dataIndex:"processName",align:"center",ellipsis:!0},{title:"任务名称",dataIndex:"taskName",align:"center",ellipsis:!0},{title:"实例名称",dataIndex:"processInstanceName",align:"center",ellipsis:!0},{title:"任务执行人",dataIndex:"assigneeName",align:"center",ellipsis:!0},{title:"创建时间",dataIndex:"createTime",align:"center",width:"14%"},{title:"操作",width:"15%",dataIndex:"operation",scopedSlots:{customRender:"operation"},align:"center"}]}},filters:{},created:function(){this.getList()},computed:{},watch:{},methods:{getList:function(){var e=this;this.loading=!0,Object(n["b"])(this.queryParam).then((function(t){e.list=t.data.records,e.total=t.data.total-0,e.loading=!1}))},handleQuery:function(){this.queryParam.pageNum=1,this.getList()},resetQuery:function(){this.dateRange=[],this.queryParam={pageNum:1,pageSize:10,processName:""},this.handleQuery()},onShowSizeChange:function(e,t){this.queryParam.pageSize=t,this.getList()},changeSize:function(e,t){this.queryParam.pageNum=e,this.queryParam.pageSize=t,this.getList()}}},l=c,u=a("2877"),m=Object(u["a"])(l,s,r,!1,null,null,null);t["default"]=m.exports},d5df:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{width:"35%","label-col":4,"wrapper-col":14,visible:e.open},on:{close:e.onClose}},[a("a-divider",{attrs:{orientation:"left"}},[a("b",[e._v(e._s(e.formTitle))])]),a("a-form-model",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("a-form-model-item",{attrs:{label:"审批意见",prop:"comment"}},[a("a-input",{attrs:{placeholder:"请输入审批意见",type:"textarea","allow-clear":""},model:{value:e.form.comment,callback:function(t){e.$set(e.form,"comment",t)},expression:"form.comment"}})],1),a("div",{staticClass:"bottom-control"},[a("a-space",[a("a-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:function(t){return e.submitForm("1")}}},[e._v(" 同意 ")]),a("a-button",{attrs:{type:"danger",loading:e.submitLoading},on:{click:function(t){return e.submitForm("0")}}},[e._v(" 驳回 ")])],1)],1)],1)],1)},r=[],n=(a("d3b7"),a("ddb0"),a("ca94")),i={name:"CreateForm",props:{},components:{},data:function(){return{submitLoading:!1,formTitle:"",form:{comment:"",taskId:"",taskName:"",instanceId:"",businessKey:"",instanceName:"",definitionId:"",values:{auditStatus:""}},open:!1,rules:{comment:[{required:!0,message:"审批意见不为空",trigger:"blur"}]}}},filters:{},created:function(){},computed:{},watch:{},methods:{onClose:function(){this.open=!1},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={comment:"",taskId:"",taskName:"",instanceId:"",businessKey:"",instanceName:"",definitionId:"",values:{auditStatus:""}}},handleAudit:function(e){this.form.taskId=e.taskId,this.form.instanceId=e.processInstanceId,this.form.taskName=e.taskName,this.form.businessKey=e.businessKey,this.form.instanceName=e.processInstanceName,this.form.definitionId=e.definitionId,this.open=!0,this.formTitle="审批"},submitForm:function(e){var t=this;this.$refs.form.validate((function(a){if(!a)return!1;t.submitLoading=!0,t.form.values.auditStatus=e,Object(n["a"])(t.form).then((function(e){t.$message.success("审批成功",3),t.open=!1,t.$emit("ok")})).finally((function(){t.reset(),t.submitLoading=!1}))}))}}},o=i,c=a("2877"),l=Object(c["a"])(o,s,r,!1,null,null,null);t["default"]=l.exports}}]);